<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The MID-LIFE CETER</title>


<style>
    :root {
        --olive-dark: #4f6f4f;
        --olive-mid: #6d8f5b;
        --olive-light: #c5d3b5;
        --olive-text: #465238;
    }

    html {
        scroll-behavior: smooth;
    }

    body {
        margin: 0;
        background: linear-gradient(180deg, #f6f8f4 0%, #ffffff 40%, #f7f9f5 100%);
        font-family: system-ui, Arial, sans-serif;
        overflow-x: hidden;
        /* prevent scrolling during splash */
        overflow-y: hidden;
    }

    /* Intro / Splash container – centered */
    #intro {
        position: fixed;
        inset: 0;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 12px;
        opacity: 1;
        transition: opacity 1.3s ease;
        background: #ffffff;
        text-align: center;
        padding: 0 16px;
        z-index: 999;
    }

    #intro img {
        width: 420px;
        max-width: 80vw;
        opacity: 0;
        animation: logoFade 1.8s forwards ease;
        border-radius: 50%;
        object-fit: cover;
        box-shadow: 0 8px 28px rgba(0, 0, 0, 0.2);
        margin: 0;
    }

    @keyframes logoFade {
        from { opacity: 0; transform: scale(0.7); }
        to   { opacity: 1; transform: scale(1); }
    }

    #clinicName {
        font-size: 32px;
        font-weight: 600;
        color: var(--olive-text);
        opacity: 0;
        animation: nameFade 1.8s forwards ease;
        animation-delay: 1.8s;
        margin-top: 12px;
    }

    @keyframes nameFade {
        from { opacity: 0; transform: translateY(12px); }
        to   { opacity: 1; transform: translateY(0); }
    }

    #slogan {
        font-size: 20px;
        color: var(--olive-text);
        opacity: 0;
        animation: sloganFade 1.8s forwards ease;
        animation-delay: 3.6s;
        margin-top: 4px;
    }

    @keyframes sloganFade {
        from { opacity: 0; transform: translateY(12px); }
        to   { opacity: 1; transform: translateY(0); }
    }

    /* MAIN HEADER */
    #mainHeader {
        width: 100%;
        padding: 16px 20px;
        box-sizing: border-box;
        display: flex;
        justify-content: space-between;
        align-items: center;
        opacity: 0;
        transition: opacity 1.3s ease;
        position: fixed;
        top: 0;
        left: 0;
        background: linear-gradient(90deg, #fdfefb 0%, #f1f6ec 40%, #fdfefb 100%);
        z-index: 10;
        border-bottom: 1px solid rgba(0,0,0,0.04);
        backdrop-filter: blur(10px);
    }

    .left-group {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .small-logo {
        width: 70px;
        border-radius: 50%;
        object-fit: cover;
        box-shadow: 0 4px 14px rgba(0,0,0,0.15);
    }

    .header-slogan {
        font-size: 18px;
        color: var(--olive-text);
        font-weight: 600;
    }

    .nav-container {
        display: flex;
        align-items: center;
        gap: 20px;
    }

    nav {
        display: flex;
        align-items: center;
        gap: 16px;
    }

    nav a {
        text-decoration: none;
        font-size: 16px;
        font-weight: 500;
        color: #444;
        position: relative;
        padding: 4px 0;
        cursor: pointer;
    }

    nav a::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: -4px;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, var(--olive-dark), var(--olive-mid));
        transition: width 0.25s ease;
    }

    nav a:hover {
        color: var(--olive-text);
    }

    nav a:hover::after {
        width: 100%;
    }

    /* Language Select */
    #langSelect {
        padding: 6px 10px;
        border-radius: 20px;
        border: 1px solid var(--olive-mid);
        background: #fff;
        color: var(--olive-text);
        font-size: 14px;
        outline: none;
        cursor: pointer;
        font-weight: 500;
    }

    /* Hamburger */
    .menu-toggle {
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 38px;
        height: 34px;
        border-radius: 10px;
        border: 1px solid rgba(120, 140, 110, 0.4);
        background: radial-gradient(circle at top, #ffffff 0%, #f1f6ec 60%, #e7efe1 100%);
        cursor: pointer;
        padding: 0;
    }

    .menu-toggle span {
        display: block;
        width: 20px;
        height: 2px;
        background: var(--olive-dark);
        margin: 3px 0;
        transition: transform 0.2s ease, opacity 0.2s ease;
    }

    .menu-toggle.open span:nth-child(1) {
        transform: translateY(5px) rotate(45deg);
    }

    .menu-toggle.open span:nth-child(2) {
        opacity: 0;
    }

    .menu-toggle.open span:nth-child(3) {
        transform: translateY(-5px) rotate(-45deg);
    }

    /* Enquiry Form Section - NOW AT TOP */
    #enquiryFormSection {
        /* Added padding-top to clear fixed header */
        padding: 130px 16px 40px; 
        display: flex;
        justify-content: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 1.3s ease;
    }

    /* Green Pulse Animation for Checklist */
    @keyframes pulseGreen {
        0% { box-shadow: 0 10px 32px rgba(0, 0, 0, 0.12), 0 0 0 0 rgba(109, 143, 91, 0.7); }
        70% { box-shadow: 0 10px 32px rgba(0, 0, 0, 0.12), 0 0 25px 15px rgba(109, 143, 91, 0); }
        100% { box-shadow: 0 10px 32px rgba(0, 0, 0, 0.12), 0 0 0 0 rgba(109, 143, 91, 0); }
    }

    .enquiry-wrapper {
        max-width: 640px;
        width: 100%;
        background: #ffffffcc;
        backdrop-filter: blur(8px);
        border-radius: 24px;
        padding: 22px 18px 22px;
        border: 2px solid rgba(160, 180, 140, 0.3);
        
        /* Attention Grabbing Pulse - FASTER SPEED (1.2s) */
        animation: pulseGreen 1.2s infinite; 
    }

    .enquiry-wrapper h2 {
        margin: 0 0 6px;
        font-size: 22px;
        color: var(--olive-text);
        text-align: left;
    }

    .enquiry-wrapper p {
        margin: 0 0 18px;
        font-size: 14px;
        color: #555;
        text-align: left;
    }

    .form-row {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        margin-bottom: 12px;
    }

    .form-group {
        flex: 1;
        min-width: 180px;
        display: flex;
        flex-direction: column;
        gap: 6px;
    }

    .form-group label {
        font-size: 13px;
        font-weight: 500;
        color: #444;
    }

    .contact-input-group {
        display: flex;
        gap: 8px;
        width: 100%;
    }

    .contact-input-group select {
        padding: 9px 8px;
        border-radius: 10px;
        border: 1px solid rgba(130, 150, 120, 0.5);
        background: #f9faf7;
        font-size: 14px;
        outline: none;
        color: #444;
        cursor: pointer;
        transition: border-color 0.2s ease;
    }
    
    .contact-input-group select:focus {
        border-color: var(--olive-mid);
    }

    .form-group input {
        padding: 9px 11px;
        border-radius: 10px;
        border: 1px solid rgba(130, 150, 120, 0.5);
        font-size: 14px;
        outline: none;
        transition: box-shadow 0.2s ease, border-color 0.2s ease;
        background: #f9faf7;
        width: 100%;
        box-sizing: border-box;
    }

    .contact-input-group input {
        flex: 1; /* Input takes remaining space */
    }

    .form-group input:focus {
        border-color: var(--olive-mid);
        box-shadow: 0 0 0 2px rgba(111, 143, 91, 0.25);
        background: #ffffff;
    }

    #submitBtn {
        margin-top: 4px;
        padding: 10px 20px;
        border-radius: 999px;
        border: none;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        background: linear-gradient(135deg, var(--olive-dark), var(--olive-mid));
        color: #ffffff;
        box-shadow: 0 8px 18px rgba(80, 110, 70, 0.35);
    }

    #submitBtn:disabled {
        opacity: 0.6;
        cursor: default;
        box-shadow: none;
    }

    #formMessage {
        margin-top: 8px;
        font-size: 13px;
        color: #444;
    }

    /* Expert Section - NOW BELOW FORM */
    #expertsSection {
        width: 100%;
        text-align: center;
        padding-top: 20px; /* Reduced padding since it's not at top anymore */
        padding-bottom: 80px;
        opacity: 0;
        transition: opacity 1.3s ease;
    }

    #expertsSection h2 {
        font-size: 28px;
        font-weight: 700;
        color: var(--olive-text);
        margin-bottom: 30px;
        padding: 0 16px;
    }

    .experts-container {
        display: flex;
        justify-content: center;
        gap: 24px;
        flex-wrap: wrap;
        padding: 0 16px 40px;
    }

    @keyframes waveIn {
        0% { opacity: 0; transform: translateY(20px) rotate(-3deg); }
        50% { opacity: 1; transform: translateY(-6px) rotate(3deg); }
        100% { opacity: 1; transform: translateY(0) rotate(0deg); }
    }

    /* Attention-asking float animation for doctors */
    @keyframes gentleFloat {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
        100% { transform: translateY(0px); }
    }

    .expert-card {
        width: 220px;
        max-width: 46%;
        background: radial-gradient(circle at top, #ffffff 0%, #f3f6ee 55%, #eef2e8 100%);
        border-radius: 22px;
        padding: 16px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        text-align: center;
        opacity: 0;
        /* Combine wave entrance and then continuous float - FASTER SPEED (2.5s) */
        animation: waveIn 0.9s forwards ease-out, gentleFloat 2.5s infinite ease-in-out 2s;
        cursor: pointer;
        border: 1px solid rgba(140, 160, 120, 0.18);
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .expert-card:hover {
        /* Pause float on hover and lift slightly */
        animation-play-state: paused;
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        border-color: var(--olive-mid);
    }

    .expert-card:nth-child(1) { animation-delay: 0.3s, 2s; }
    .expert-card:nth-child(2) { animation-delay: 0.5s, 2.5s; }
    .expert-card:nth-child(3) { animation-delay: 0.7s, 3s; }
    .expert-card:nth-child(4) { animation-delay: 0.9s, 3.5s; }

    .expert-card img {
        width: 100%;
        height: 210px;
        object-fit: cover;
        border-radius: 18px;
        margin-bottom: 10px;
    }

    .expert-name {
        font-size: 17px;
        font-weight: 700;
        color: #333;
        margin-bottom: 4px;
    }

    .expert-title {
        font-size: 13px;
        color: #666;
        line-height: 1.4;
    }

    /* POPUP OVERLAY */
    #doctorPopup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255,255,255,0.95);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        padding: 20px;
        box-sizing: border-box;
    }

    #closePopup {
        position: absolute;
        top: 18px;
        right: 20px;
        font-size: 30px;
        cursor: pointer;
        color: #444;
        z-index: 10000;
    }

    .popup-content {
        display: flex;
        flex-direction: row;
        gap: 24px;
        width: 100%;
        max-width: 900px;
        max-height: 90vh;
        background: #ffffff;
        border-radius: 22px;
        padding: 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.18);
        overflow-y: auto;
        position: relative;
    }

    .popup-photo {
        width: 320px;
        height: 380px;
        border-radius: 22px;
        object-fit: cover;
        box-shadow: 0 4px 14px rgba(0,0,0,0.18);
        flex-shrink: 0;
    }

    .popup-text {
        max-width: 520px;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .popup-text h3 {
        font-size: 26px;
        font-weight: 700;
        margin: 0;
        color: var(--olive-text);
        word-wrap: break-word;
    }

    .popup-text p {
        font-size: 16px;
        line-height: 1.6;
        color: #444;
        margin: 0 0 10px;
        word-wrap: break-word;
    }

    .popup-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin-top: 8px;
    }

    .popup-buttons button {
        padding: 12px 20px;
        border: none;
        font-size: 15px;
        border-radius: 12px;
        cursor: pointer;
        background: linear-gradient(135deg, var(--olive-dark), var(--olive-mid));
        color: #fff;
        box-shadow: 0 4px 12px rgba(70, 100, 60, 0.25);
        font-weight: 600;
        transition: transform 0.1s, box-shadow 0.1s;
    }

    .popup-buttons button:active {
        transform: scale(0.98);
    }

    /* PDF button style */
    .btn-pdf {
        background: #e8eee3 !important;
        color: var(--olive-text) !important;
        box-shadow: none !important;
        border: 1px solid rgba(70, 100, 60, 0.1) !important;
    }

    .btn-pdf:hover {
        background: #dbe5d2 !important;
    }
    
    /* Back button style */
    .btn-back {
        background: transparent !important;
        color: #666 !important;
        border: 2px solid #ddd !important;
        box-shadow: none !important;
    }
    .btn-back:hover {
        background: #f5f5f5 !important;
        border-color: #ccc !important;
        color: #333 !important;
    }

    /* --- CHAT WIDGET STYLES --- */
    #chat-widget {
        position: fixed;
        bottom: 24px;
        right: 24px;
        z-index: 990; /* Just below splash */
        font-family: system-ui, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        pointer-events: none; /* Initially disabled during splash */
        opacity: 0;
        transition: opacity 1s ease;
    }

    #chat-toggle-btn {
        height: 54px;
        padding: 0 24px;
        border-radius: 27px;
        background: var(--olive-dark);
        color: white;
        border: none;
        box-shadow: 0 6px 18px rgba(79, 111, 79, 0.35);
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: transform 0.2s, background-color 0.2s;
        font-weight: 600;
        font-size: 15px;
        gap: 8px;
        pointer-events: auto;
    }

    #chat-toggle-btn:hover {
        transform: scale(1.05);
        background-color: var(--olive-mid);
    }

    #chat-window {
        width: 340px;
        height: 480px;
        background: white;
        border-radius: 18px;
        box-shadow: 0 8px 30px rgba(0,0,0,0.18);
        display: none;
        flex-direction: column;
        overflow: hidden;
        margin-bottom: 16px;
        border: 1px solid rgba(0,0,0,0.06);
        pointer-events: auto;
        transform-origin: bottom right;
        animation: chatPop 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
    }

    @keyframes chatPop {
        from { transform: scale(0.8); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }

    .chat-header {
        background: var(--olive-dark);
        color: white;
        padding: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .chat-header h3 {
        margin: 0;
        font-size: 16px;
        font-weight: 600;
        letter-spacing: 0.3px;
    }

    .chat-close {
        background: none;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
        padding: 0;
        line-height: 1;
        opacity: 0.8;
    }
    .chat-close:hover { opacity: 1; }

    .chat-messages {
        flex: 1;
        padding: 16px;
        overflow-y: auto;
        background: #f9faf8;
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .message {
        max-width: 80%;
        padding: 10px 14px;
        border-radius: 14px;
        font-size: 14px;
        line-height: 1.45;
        word-wrap: break-word;
    }

    .message.user {
        align-self: flex-end;
        background: var(--olive-mid);
        color: white;
        border-bottom-right-radius: 2px;
        box-shadow: 0 2px 6px rgba(109, 143, 91, 0.2);
    }

    .message.bot {
        align-self: flex-start;
        background: #ffffff;
        color: #333;
        border-bottom-left-radius: 2px;
        border: 1px solid #e0e0e0;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    .typing-indicator {
        font-style: italic;
        color: #888;
        font-size: 12px;
        margin-left: 8px;
        display: none;
    }

    .chat-input-area {
        padding: 12px;
        border-top: 1px solid #eee;
        display: flex;
        gap: 8px;
        background: white;
    }

    .chat-input-area input {
        flex: 1;
        padding: 10px 14px;
        border-radius: 24px;
        border: 1px solid #ddd;
        outline: none;
        font-size: 14px;
        transition: border-color 0.2s;
        background: #fdfdfd;
    }
    
    .chat-input-area input:focus {
        border-color: var(--olive-mid);
        background: #fff;
    }

    .chat-input-area button {
        background: var(--olive-dark);
        color: white;
        border: none;
        width: 38px;
        height: 38px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: transform 0.2s;
    }

    .chat-input-area button:hover {
        transform: scale(1.1);
    }
    
    /* Mobile styles */
    @media (max-width: 768px) {
        #mainHeader {
            padding: 10px 12px;
        }

        .header-slogan {
            font-size: 16px;
        }

        nav {
            position: absolute;
            top: 60px;
            right: 12px;
            background: #f6faf2;
            border-radius: 16px;
            box-shadow: 0 10px 24px rgba(0,0,0,0.16);
            padding: 10px 14px;
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
            opacity: 0;
            pointer-events: none;
            transform: translateY(-10px);
            transition: opacity 0.2s ease, transform 0.2s ease;
        }

        nav.open {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
        }

        nav a {
            font-size: 15px;
        }

        .menu-toggle {
            display: flex;
        }
        
        #enquiryFormSection {
            padding-top: 100px; /* Adjust for mobile header */
        }

        .experts-container {
            gap: 14px;
        }

        .expert-card {
            max-width: 100%;
            width: 100%;
        }

        /* Responsive Popup Fixes */
        #doctorPopup {
            padding: 10px;
            align-items: center; /* Ensure centered */
        }
        
        .popup-content {
            flex-direction: column;
            align-items: center;
            max-height: 85vh; /* Allow some margin top/bottom */
            width: 100%;
            padding: 24px 16px;
            gap: 16px;
        }

        .popup-photo {
            width: 120px; /* Smaller circular avatar */
            height: 120px;
            border-radius: 50%;
            margin-bottom: 4px;
        }

        .popup-text {
            max-width: 100%;
            text-align: center; /* Center text on mobile */
            gap: 8px;
        }

        .popup-text h3 {
            font-size: 22px;
            text-align: center;
        }

        .popup-text p {
            font-size: 14px;
            text-align: center;
        }

        .popup-buttons {
            flex-direction: column;
            width: 100%;
            align-items: stretch;
            gap: 10px;
            margin-top: 12px;
        }

        .popup-buttons button {
            width: 100%;
            padding: 14px;
            text-align: center;
            font-size: 16px; /* Larger text for readability */
        }

        /* Splash tweaks */
        #intro img {
            width: 260px;
        }

        #clinicName {
            font-size: 24px;
        }

        #slogan {
            font-size: 16px;
        }

        /* Chat Mobile */
        #chat-widget {
            bottom: 20px;
            right: 16px;
        }
        #chat-window {
            width: calc(100vw - 32px);
            height: 60vh;
        }
    }
</style>
</head>
<body>

<!-- INTRO -->
<div id="intro">
    <img src="logo.png" alt="Logo">
    <div id="clinicName" data-key="clinicName">THE MID-LIFE CENTER</div>
    <div id="slogan" data-key="slogan">Embrace Your Best Self. Specialized Care For Menopause.</div>
</div>

<!-- HEADER -->
<header id="mainHeader">
    <div class="left-group">
        <img src="logo.png" alt="Logo" class="small-logo">
        <div class="header-slogan" data-key="clinicName">THE MID-LIFE CENTER</div>
    </div>

    <div class="nav-container">
        <!-- LANGUAGE SELECTOR -->
        <select id="langSelect" onchange="changeLanguage(this.value)">
            <option value="en">English</option>
            <option value="hi">हिंदी (Hindi)</option>
            <option value="ta">தமிழ் (Tamil)</option>
        </select>

        <button id="menuToggle" class="menu-toggle" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <nav id="navMenu">
            <a href="about.html" data-key="navAbout">About Us</a>
            <a href="#enquiryFormSection" data-key="navEnquiry">Enquiry Form</a>
        </nav>
    </div>
</header>

<!-- ENQUIRY / CHECKLIST FORM (MOVED TO TOP) -->
<section id="enquiryFormSection">
    <div class="enquiry-wrapper">
        <h2 data-key="formTitle">Join Our Menopause Checklist</h2>
        <p data-key="formDesc">Share your details, and we’ll send you our specialized menopause checklist and updates from THE MID-LIFE CENTER.</p>

        <form id="enquiryForm">
            <div class="form-row">
                <div class="form-group">
                    <label for="fullName" data-key="labelName">Name</label>
                    <input type="text" id="fullName" name="fullName" placeholder="Your full name" required>
                </div>
                <!-- Updated Contact Group with Dropdown -->
                <div class="form-group">
                    <label for="contactValue" data-key="labelContact">Contact Details</label>
                    <div class="contact-input-group">
                        <select id="contactType">
                            <option value="phone" data-key="optPhone">Phone</option>
                            <option value="email" data-key="optEmail">Email</option>
                        </select>
                        <input type="tel" id="contactValue" name="contactValue" placeholder="10-digit mobile number" required>
                    </div>
                </div>
            </div>

            <button type="submit" id="submitBtn" data-key="btnJoin">Join Checklist</button>
            <div id="formMessage"></div>
        </form>
    </div>
</section>

<!-- DOCTOR SECTION (MOVED BELOW FORM) -->
<div id="expertsSection">
    <h2 data-key="expertsTitle">Meet Our Dedicated Menopause Experts</h2>

    <div class="experts-container">

        <div class="expert-card">
            <img src="doc1.jpg" alt="">
            <div class="expert-name" data-key="doc1Name">Dr. Lakshmi Iyer</div>
            <div class="expert-title" data-key="doc1Title">MD, DGO, DNB, Hormone Balance Expert</div>
        </div>

        <div class="expert-card">
            <img src="doc2.jpg" alt="">
            <div class="expert-name" data-key="doc2Name">Dr. Christina Roberts</div>
            <div class="expert-title" data-key="doc2Title">MBBS, MRCOG, MS, Nutritional Guidance Expert</div>
        </div>

        <div class="expert-card">
            <img src="doc3.jpg" alt="">
            <div class="expert-name" data-key="doc3Name">Dr. Saranya Devi</div>
            <div class="expert-title" data-key="doc3Title">MD, PhD, Bone Health Expert</div>
        </div>

        <div class="expert-card">
            <img src="doc4.jpg" alt="">
            <div class="expert-name" data-key="doc4Name">Dr. Kavitha Sundar</div>
            <div class="expert-title" data-key="doc4Title">MD, FOGSI, Heart Health Expert</div>
        </div>

    </div>
</div>

<!-- POPUP OVERLAY -->
<div id="doctorPopup">
    <div id="closePopup">&times;</div>

    <div class="popup-content">
        <img id="popupPhoto" class="popup-photo" src="">

        <div class="popup-text">
            <h3 id="popupName"></h3>
            <p id="popupDescription"></p>

            <div class="popup-buttons">
                <!-- PDF button (uses doctor-specific PDF) -->
                <button id="pdfButton" class="btn-pdf" data-key="btnViewPdf">View Doctor PDF</button>
                <!-- Removed Brochure Button -->
                <button id="backButton" class="btn-back" data-key="btnBack">Back</button>
            </div>
        </div>
    </div>
</div>

<!-- CHAT WIDGET HTML -->
<div id="chat-widget">
    <div id="chat-window">
        <div class="chat-header">
            <h3 data-key="chatHeader">Menopause Assistant</h3>
            <button class="chat-close" onclick="toggleChat()">&times;</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message bot" data-key="chatWelcome">Hello! I am your Menopause Health Assistant. Ask me anything about women's health or our clinic services.</div>
        </div>
        <div class="typing-indicator" id="typingIndicator">Typing...</div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" placeholder="Type your question..." onkeypress="handleKeyPress(event)">
            <button onclick="sendMessage()">
                <!-- Send Icon -->
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
            </button>
        </div>
    </div>
    <button id="chat-toggle-btn" onclick="toggleChat()">
        <!-- Chat Bubble Icon -->
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
        <span data-key="btnAskExpert">Ask an Expert</span>
    </button>
</div>


<!-- SCRIPT (WITH SUPABASE + GEMINI) -->
<script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm';

    const GEMINI_API_KEY = "AIzaSyCZYlxQb-iQ4gu2lAuPRote5Oe4SgeeaiE";

    const SUPABASE_URL = 'https://vlktdxuffwawqulmtklz.supabase.co';

    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZsa3RkeHVmZndhd3F1bG10a2x6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNDU5NTYsImV4cCI6MjA3OTYyMTk1Nn0.FnAWQEqpEC5tMezVf0X0nCo9VPGAd6skWU9fRQnBZj8';

    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    
    const translations = {
        en: {
            clinicName: "THE MID-LIFE CENTER",
            slogan: "Embrace Your Best Self. Specialized Care For Menopause.",
            navAbout: "About Us",
            navEnquiry: "Enquiry Form",
            expertsTitle: "Meet Our Dedicated Menopause Experts",
            formTitle: "Join Our Menopause Checklist",
            formDesc: "Share your details, and we’ll send you our specialized menopause checklist and updates from THE MID-LIFE CENTER.",
            labelName: "Name",
            labelContact: "Contact Details",
            optPhone: "Phone",
            optEmail: "Email",
            btnJoin: "Join Checklist",
            btnAskExpert: "Ask an Expert",
            chatHeader: "Menopause Assistant",
            chatWelcome: "Hello! I am your Menopause Health Assistant. Ask me anything about women's health or our clinic services.",
            btnViewPdf: "View Doctor PDF",
            btnGetBrochure: "Get Brochure",
            btnBack: "Back",
            doc1Name: "Dr. Lakshmi Iyer",
            doc1Title: "MD, DGO, DNB, Hormone Balance Expert",
            doc2Name: "Dr. Christina Roberts",
            doc2Title: "MBBS, MRCOG, MS, Nutritional Guidance Expert",
            doc3Name: "Dr. Saranya Devi",
            doc3Title: "MD, PhD, Bone Health Expert",
            doc4Name: "Dr. Kavitha Sundar",
            doc4Title: "MD, FOGSI, Heart Health Expert",
            placeholderName: "Your full name",
            placeholderPhone: "10-digit mobile number",
            placeholderEmail: "yourname@example.com",
            placeholderChat: "Type your question..."
        },
        hi: {
            clinicName: "द मिड-लाइफ सेंटर",
            slogan: "अपना सर्वश्रेष्ठ स्वरूप अपनाएं। रजोनिवृत्ति के लिए विशेष देखभाल।",
            navAbout: "हमारे बारे में",
            navEnquiry: "पूछताछ फॉर्म",
            expertsTitle: "हमारे समर्पित रजोनिवृत्ति विशेषज्ञों से मिलें",
            formTitle: "हमारी रजोनिवृत्ति चेकलिस्ट में शामिल हों",
            formDesc: "अपना विवरण साझा करें, और हम आपको अपनी विशेष रजोनिवृत्ति चेकलिस्ट और अपडेट भेजेंगे।",
            labelName: "नाम",
            labelContact: "संपर्क विवरण",
            optPhone: "फ़ोन",
            optEmail: "ईमेल",
            btnJoin: "चेकलिस्ट में शामिल हों",
            btnAskExpert: "विशेषज्ञ से पूछें",
            chatHeader: "रजोनिवृत्ति सहायक",
            chatWelcome: "नमस्ते! मैं आपकी रजोनिवृत्ति स्वास्थ्य सहायक हूँ। महिलाओं के स्वास्थ्य या हमारी क्लिनिक सेवाओं के बारे में कुछ भी पूछें।",
            btnViewPdf: "डॉक्टर पीडीएफ देखें",
            btnGetBrochure: "विवरणिका (Brochure) प्राप्त करें",
            btnBack: "वापस जाएं",
            doc1Name: "डॉ. लक्ष्मी अय्यर",
            doc1Title: "एमडी, डीजीओ, डीएनबी, हार्मोन संतुलन विशेषज्ञ",
            doc2Name: "डॉ. क्रिस्टीना रॉबर्ट्स",
            doc2Title: "एमबीबीएस, एमआरसीओजी, एमएस, पोषण मार्गदर्शन विशेषज्ञ",
            doc3Name: "डॉ. सरण्या देवी",
            doc3Title: "एमडी, पीएचडी, अस्थि स्वास्थ्य विशेषज्ञ",
            doc4Name: "डॉ. कविता सुंदर",
            doc4Title: "एमडी, एफओजीएसआई, हृदय स्वास्थ्य विशेषज्ञ",
            placeholderName: "आपका पूरा नाम",
            placeholderPhone: "10 अंकों का मोबाइल नंबर",
            placeholderEmail: "yourname@example.com",
            placeholderChat: "अपना प्रश्न टाइप करें..."
        },
        ta: {
            clinicName: "தி மிட்-லைஃப் சென்டர்",
            slogan: "சிறந்த ஆரோக்கியத்தை தழுவுங்கள். மெனோபாஸ் சிறப்பு சிகிச்சை.",
            navAbout: "எங்களைப் பற்றி",
            navEnquiry: "விசாரணை படிவம்",
            expertsTitle: "எங்கள் மெனோபாஸ் நிபுணர்களை சந்திக்கவும்",
            formTitle: "எங்கள் மெனோபாஸ் சரிபார்ப்பு பட்டியலில் இணையுங்கள்",
            formDesc: "உங்கள் விவரங்களைப் பகிருங்கள், எங்கள் சிறப்பு மெனோபாஸ் சரிபார்ப்பு பட்டியல் மற்றும் தகவல்களை உங்களுக்கு அனுப்புவோம்.",
            labelName: "பெயர்",
            labelContact: "தொடர்பு விவரங்கள்",
            optPhone: "தொலைபேசி",
            optEmail: "மின்னஞ்சல்",
            btnJoin: "பட்டியலில் இணையுங்கள்",
            btnAskExpert: "நிபுணரிடம் கேளுங்கள்",
            chatHeader: "மெனோபாஸ் உதவியாளர்",
            chatWelcome: "வணக்கம்! நான் உங்கள் மெனோபாஸ் நல உதவியாளர். பெண்கள் நலம் அல்லது எங்கள் சேவைகள் பற்றி எதையும் கேட்கலாம்.",
            btnViewPdf: "மருத்துவர் PDF",
            btnGetBrochure: "சிற்றேடு பெற",
            btnBack: "பின்னால்",
            doc1Name: "டாக்டர். லட்சுமி ஐயர்",
            doc1Title: "MD, DGO, DNB, ஹார்மோன் சமநிலை நிபுணர்",
            doc2Name: "டாக்டர். கிறிஸ்டினா ராபர்ட்ஸ்",
            doc2Title: "MBBS, MRCOG, MS, ஊட்டச்சத்து வழிகாட்டுதல் நிபுணர்",
            doc3Name: "டாக்டர். சரண்யா தேவி",
            doc3Title: "MD, PhD, எலும்பு ஆரோக்கிய நிபுணர்",
            doc4Name: "டாக்டர். கவிதா சுந்தர்",
            doc4Title: "MD, FOGSI, இதய ஆரோக்கிய நிபுணர்",
            placeholderName: "உங்கள் முழு பெயர்",
            placeholderPhone: "10 இலக்க மொபைல் எண்",
            placeholderEmail: "yourname@example.com",
            placeholderChat: "உங்கள் கேள்வியை தட்டச்சு செய்யவும்..."
        }
    };

    let currentLang = "en";

    window.changeLanguage = function(lang) {
        currentLang = lang;
        const t = translations[lang];

        // Update text content
        document.querySelectorAll("[data-key]").forEach(el => {
            const key = el.getAttribute("data-key");
            if (t[key]) el.textContent = t[key];
        });

        // Update placeholders
        document.getElementById("fullName").placeholder = t.placeholderName;
        const cType = document.getElementById("contactType").value;
        if (cType === 'phone') document.getElementById("contactValue").placeholder = t.placeholderPhone;
        else document.getElementById("contactValue").placeholder = t.placeholderEmail;
        
        document.getElementById("chatInput").placeholder = t.placeholderChat;
    };


    /* INTRO / MAIN CONTENT TIMING */
    const totalTime = 5400 + 2500;

    setTimeout(() => {
        const intro = document.getElementById("intro");
        intro.style.opacity = "0";

        setTimeout(() => intro.style.display = "none", 1300);

        setTimeout(() => {
            document.getElementById("mainHeader").style.opacity = "1";
        }, 200);

        // FORM SECTION COMES FIRST NOW
        setTimeout(() => {
            const formSection = document.getElementById("enquiryFormSection");
            formSection.style.opacity = "1";
            formSection.style.pointerEvents = "auto";
            document.body.style.overflowY = "auto";
            
            // Show Chat Button
            const chatWidget = document.getElementById("chat-widget");
            chatWidget.style.opacity = "1";
            chatWidget.style.pointerEvents = "auto";
        }, 500);

        // EXPERTS SECTION COMES SECOND
        setTimeout(() => {
            document.getElementById("expertsSection").style.opacity = "1";
        }, 800);

    }, totalTime);

    /* HAMBURGER MENU */
    const menuToggle = document.getElementById('menuToggle');
    const navMenu = document.getElementById('navMenu');

    menuToggle.addEventListener('click', () => {
        menuToggle.classList.toggle('open');
        navMenu.classList.toggle('open');
    });

    navMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            if (navMenu.classList.contains('open')) {
                navMenu.classList.remove('open');
                menuToggle.classList.remove('open');
            }
        });
    });

    /* DOCTOR POPUP DATA */
    const doctorData = {
        1: {
            nameKey: "doc1Name",
            desc: "Dr. Iyer has over 10 years of dedicated experience in women's health, specializing in comprehensive Hormone Replacement Therapy (HRT). She focuses on tailoring treatment protocols to effectively manage complex symptoms like severe night sweats and mood disturbances.",
            photo: "doc1.jpg",
            pdf: "lakshmi.pdf"
        },
        2: {
            nameKey: "doc2Name",
            desc: "As a leading advocate for integrative menopausal care for over 15 years, Dr. Roberts combines medical treatments with personalized lifestyle and nutritional guidance.",
            photo: "doc2.jpg",
            pdf: "christina.pdf"
        },
        3: {
            nameKey: "doc3Name",
            desc: "With a strong background in Endocrinology, Dr. Devi offers insights into hormonal shifts underlying menopause and advanced care for bone and metabolic health.",
            photo: "doc3.jpg",
            pdf: "saranya.pdf"
        },
        4: {
            nameKey: "doc4Name",
            desc: "With two decades of expertise, Dr. Sundar specializes in menopause and cardiac health, providing proactive, hormone-informed strategies to protect heart health.",
            photo: "doc4.jpg",
            pdf: "kavitha.pdf"
        }
    };

    const pdfButton = document.getElementById('pdfButton');

    /* OPEN POPUP */
    document.querySelectorAll(".expert-card").forEach((card, index) => {
        card.addEventListener("click", () => {
            const d = doctorData[index + 1];
            document.getElementById("popupPhoto").src = d.photo;
            
            // Get translated name
            const t = translations[currentLang];
            document.getElementById("popupName").textContent = t[d.nameKey] || "";
            // Description is static English for now in data object, could be translated similarly if data existed
            document.getElementById("popupDescription").textContent = d.desc; 

            // PDF button logic
            if (d.pdf && d.pdf.trim() !== "") {
                pdfButton.style.display = "inline-block";
                pdfButton.onclick = () => window.open(d.pdf, "_blank");
            } else {
                pdfButton.style.display = "none";
                pdfButton.onclick = null;
            }

            document.getElementById("doctorPopup").style.display = "flex";
            document.body.style.overflow = "hidden";
        });
    });

    /* CLOSE FUNCTION */
    function closePopup() {
        document.getElementById("doctorPopup").style.display = "none";
        document.body.style.overflow = "auto";
    }

    /* CLOSE BUTTONS */
    document.getElementById("closePopup").addEventListener("click", closePopup);
    document.getElementById("backButton").addEventListener("click", closePopup);

    /* CLOSE POPUP WHEN CLICKING OUTSIDE THE BOX */
    document.getElementById("doctorPopup").addEventListener("click", (e) => {
        if (e.target === document.getElementById("doctorPopup")) {
            closePopup();
        }
    });

    /* --- FORM INPUT TOGGLE LOGIC --- */
    const contactType = document.getElementById('contactType');
    const contactValue = document.getElementById('contactValue');

    contactType.addEventListener('change', () => {
        contactValue.value = ''; // clear input on switch
        const t = translations[currentLang];
        
        if (contactType.value === 'email') {
            contactValue.type = 'email';
            contactValue.placeholder = t.placeholderEmail;
        } else {
            contactValue.type = 'tel';
            contactValue.placeholder = t.placeholderPhone;
        }
    });

    /* --- CHAT BOT LOGIC --- */
    window.toggleChat = function() {
        const win = document.getElementById('chat-window');
        if (win.style.display === 'flex') {
            win.style.display = 'none';
        } else {
            win.style.display = 'flex';
        }
    };

    window.handleKeyPress = function(e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    };

    window.sendMessage = async function() {
        const input = document.getElementById('chatInput');
        const text = input.value.trim();
        if (!text) return;

        // Display user message
        const messagesDiv = document.getElementById('chatMessages');
        const userDiv = document.createElement('div');
        userDiv.className = 'message user';
        userDiv.textContent = text;
        messagesDiv.appendChild(userDiv);
        
        input.value = '';
        messagesDiv.scrollTop = messagesDiv.scrollHeight;

        // Show typing indicator
        const typing = document.getElementById('typingIndicator');
        typing.style.display = 'block';
        messagesDiv.scrollTop = messagesDiv.scrollHeight;

        // Construct system prompt with language awareness
        let langInstruction = "The user is currently browsing in English.";
        if (currentLang === 'hi') langInstruction = "The user is currently browsing in Hindi. Please reply in Hindi.";
        if (currentLang === 'ta') langInstruction = "The user is currently browsing in Tamil. Please reply in Tamil.";

        const finalSystemInstruction = `You are a warm, knowledgeable, and empathetic assistant for 'The Mid-Life Center'. You specialize in menopause and women's health. Answer questions concisely (under 80 words) and supportively. If a user asks about unrelated topics (like sports, politics, coding), politely steer the conversation back to women's health. Do not provide specific medical prescriptions, but offer general medical guidance and suggest booking an appointment with our experts. ${langInstruction}`;

        try {
            // Using direct fetch to Gemini API to ensure compatibility in single file
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{ text: text }]
                    }],
                    systemInstruction: {
                        parts: [{ text: finalSystemInstruction }]
                    }
                })
            });

            const data = await response.json();
            typing.style.display = 'none';

            let botText = "I'm sorry, I couldn't process that right now.";
            if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                botText = data.candidates[0].content.parts[0].text;
            } else if (data.error) {
                console.error(data.error);
                botText = "I'm having trouble connecting to the service. Please check your API Key.";
            }

            // Display bot message
            const botDiv = document.createElement('div');
            botDiv.className = 'message bot';
            botDiv.textContent = botText;
            messagesDiv.appendChild(botDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;

        } catch (err) {
            console.error(err);
            typing.style.display = 'none';
            const botDiv = document.createElement('div');
            botDiv.className = 'message bot';
            botDiv.textContent = "Error: Could not reach the assistant.";
            messagesDiv.appendChild(botDiv);
        }
    };

    /* VIEW COUNTER */
    async function incrementVisitCounter() {
        try {
            const { data, error } = await supabase
                .from('page_visits')
                .select('id, visit_count')
                .eq('slug', 'midlife_home')
                .single();

            if (error && error.code !== 'PGRST116') {
                console.error('Error fetching visit count:', error);
                return;
            }

            if (data) {
                const current = data.visit_count || 0;
                await supabase
                    .from('page_visits')
                    .update({ visit_count: current + 1 })
                    .eq('id', data.id);
            } else {
                await supabase
                    .from('page_visits')
                    .insert({ slug: 'midlife_home', visit_count: 1 });
            }
        } catch (err) {
            console.error('Unexpected error with visit counter:', err);
        }
    }

    incrementVisitCounter();

    /* ENQUIRY FORM -> SUPABASE INSERT */
    const enquiryForm = document.getElementById('enquiryForm');
    const formMessage = document.getElementById('formMessage');
    const submitBtn = document.getElementById('submitBtn');

    enquiryForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        formMessage.textContent = '';
        submitBtn.disabled = true;

        const fullName = document.getElementById('fullName').value.trim();
        const cType = document.getElementById('contactType').value;
        const cValue = document.getElementById('contactValue').value.trim();

        if (!fullName || !cValue) {
            formMessage.textContent = 'Please fill in both your name and contact details.';
            submitBtn.disabled = false;
            return;
        }

        // VALIDATION based on type
        let errorMsg = "";
        if (cType === 'phone') {
            if (!/^[0-9]{10}$/.test(cValue)) {
                errorMsg = 'Please enter a valid 10-digit mobile number.';
            }
        } else {
            // Simple email regex
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(cValue)) {
                errorMsg = 'Please enter a valid email address.';
            }
        }

        if (errorMsg) {
            formMessage.textContent = errorMsg;
            submitBtn.disabled = false;
            return;
        }

        formMessage.textContent = 'Submitting...';

        const payload = { full_name: fullName };
        if (cType === 'phone') {
            payload.phone = cValue;
        } else {
            payload.email = cValue;
        }

        const { error } = await supabase
            .from('menopause_enquiries')
            .insert([payload]);

        if (error) {
            console.error('Error saving enquiry:', error);
            formMessage.textContent = 'Something went wrong. Please try again in a moment.';
        } else {
            formMessage.textContent = 'Thank you! You’ve been added to our checklist.';
            enquiryForm.reset();
            // Reset contact field to phone default
            contactType.value = 'phone';
            // update placeholders based on current language
            const t = translations[currentLang];
            contactType.value = 'phone';
            document.getElementById("contactValue").type = 'tel';
            document.getElementById("contactValue").placeholder = t.placeholderPhone;
        }
        submitBtn.disabled = false;
    });
</script>

</body>
</html>
